(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[99],{66:function(e,t,r){Promise.resolve().then(r.bind(r,2101))},2101:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return i}});var s=r(3827),n=r(2406),l=r(7907),a=r(4090);function i(){let{user:e,loading:t}=(0,n.useAuth)(),r=(0,l.useRouter)();return((0,a.useEffect)(()=>{t||e||r.push("/auth/login")},[e,t,r]),t)?(0,s.jsx)("div",{className:"min-h-screen bg-[#FFF5F0] pt-20",children:(0,s.jsx)("div",{className:"max-w-4xl mx-auto px-6",children:(0,s.jsx)("div",{className:"bg-white p-8 rounded-2xl shadow-sm border border-[#FFE5D9]",children:(0,s.jsxs)("div",{className:"flex items-center justify-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#FFB996]"}),(0,s.jsx)("span",{className:"ml-3 text-[#994D1C]",children:"Y\xfckleniyor..."})]})})})}):e?(0,s.jsx)("div",{className:"min-h-screen bg-[#FFF5F0] pt-20",children:(0,s.jsx)("div",{className:"max-w-4xl mx-auto px-6",children:(0,s.jsxs)("div",{className:"bg-white p-8 rounded-2xl shadow-sm border border-[#FFE5D9]",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-[#6B3416] mb-8",children:"Profil Bilgileri"}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-sm font-medium text-[#994D1C]",children:"Ad Soyad"}),(0,s.jsx)("p",{className:"mt-1 text-lg text-[#6B3416]",children:e.name})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-sm font-medium text-[#994D1C]",children:"E-posta"}),(0,s.jsx)("p",{className:"mt-1 text-lg text-[#6B3416]",children:e.email})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-sm font-medium text-[#994D1C]",children:"\xdcniversite"}),(0,s.jsx)("p",{className:"mt-1 text-lg text-[#6B3416]",children:e.university})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-sm font-medium text-[#994D1C]",children:"Rol"}),(0,s.jsx)("p",{className:"mt-1 text-lg text-[#6B3416] capitalize",children:"student"===e.role?"\xd6ğrenci":"\xd6ğretmen"})]}),"teacher"===e.role&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-sm font-medium text-[#994D1C]",children:"Verdiği Ders / Uzmanlık Alanı"}),(0,s.jsx)("p",{className:"mt-1 text-lg text-[#6B3416]",children:e.expertise||"Belirtilmemiş"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-sm font-medium text-[#994D1C]",children:"Hesap Durumu"}),(0,s.jsx)("div",{className:"mt-2 inline-flex items-center px-3 py-1 rounded-full text-sm font-medium\n                ".concat(e.isVerified?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:e.isVerified?"Doğrulanmış":"Doğrulanmamış"})]})]})]})})}):null}},2406:function(e,t,r){"use strict";r.r(t),r.d(t,{AuthProvider:function(){return i},useAuth:function(){return o}});var s=r(3827),n=r(4090),l=r(7907);let a=(0,n.createContext)({user:null,loading:!1,error:null,login:async()=>{},register:async()=>{},logout:async()=>{},setUser:()=>{}});function i(e){let{children:t}=e,[r,i]=(0,n.useState)(null),[o,u]=(0,n.useState)(!0),[c,d]=(0,n.useState)(null),[m,h]=(0,n.useState)(!1),x=(0,l.useRouter)();(0,n.useEffect)(()=>{h(!0);try{let e=localStorage.getItem("user");if(e){let t=JSON.parse(e);i(t)}}catch(e){console.error("Error loading user from localStorage:",e)}finally{u(!1)}},[]);let f=async e=>{u(!0),d(null);try{let t=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),r=await t.json();if(403===t.status&&r.needsVerification){d("L\xfctfen \xf6nce email adresinizi doğrulayın"),x.push("/auth/verify?email=".concat(encodeURIComponent(r.email)));return}if(!t.ok)throw Error(r.error||"Giriş yapılırken bir hata oluştu");i(r.user),localStorage.setItem("user",JSON.stringify(r.user)),localStorage.setItem("token",r.token),"student"===r.user.role?x.push("/egitmenler"):x.push("/")}catch(e){throw d(e.message),e}finally{u(!1)}},g=async e=>{u(!0),d(null);try{let t=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),r=await t.json();if(!t.ok)throw Error(r.error||"Kayıt olurken bir hata oluştu");let s=null;r.user?(s=r.user,console.log("API yanıtı result.user i\xe7inde bulundu:",s)):r.id||r._id||r.name||r.email?(s=r,console.log("API yanıtı doğrudan result i\xe7inde bulundu:",s)):(console.log("API yanıtında kullanıcı verisi bulunamadı, ge\xe7ici kullanıcı oluşturuluyor"),s={id:Math.random().toString(36).substring(2,15),name:e.name,email:e.email,role:e.role,university:e.university,isVerified:!1}),console.log("Kullanıcının kayıt formunda se\xe7tiği rol:",e.role),console.log("API yanıtında gelen rol (varsa):",s.role);let n={id:s.id||s._id||"",name:s.name||e.name||"",email:s.email||e.email||"",role:e.role||s.role||"student",university:s.university||e.university||"",isVerified:s.isVerified||!1,expertise:s.expertise};console.log("Doğrulanmış kullanıcı verisi:",n),x.push("/auth/verify?email=".concat(encodeURIComponent(n.email)))}catch(e){throw console.error("Kayıt hatası:",e),d(e.message),e}finally{u(!1)}},y=async()=>{u(!0),d(null);try{let e=await fetch("/api/auth/logout",{method:"POST"});if(!e.ok){let t=await e.json();throw Error(t.error||"\xc7ıkış yapılırken bir hata oluştu")}i(null),localStorage.removeItem("user"),localStorage.removeItem("token"),x.push("/auth/login")}catch(e){throw d(e.message),e}finally{u(!1)}};return m?(0,s.jsx)(a.Provider,{value:{user:r,loading:o,error:c,login:f,register:g,logout:y,setUser:i},children:t}):(0,s.jsx)(a.Provider,{value:{user:null,loading:!0,error:null,login:async()=>{},register:async()=>{},logout:async()=>{},setUser:()=>{}},children:t})}function o(){return(0,n.useContext)(a)}},7907:function(e,t,r){"use strict";var s=r(5313);r.o(s,"usePathname")&&r.d(t,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}}),r.o(s,"useSearchParams")&&r.d(t,{useSearchParams:function(){return s.useSearchParams}})}},function(e){e.O(0,[971,69,744],function(){return e(e.s=66)}),_N_E=e.O()}]);