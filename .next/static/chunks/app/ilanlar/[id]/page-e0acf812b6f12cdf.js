(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[788],{445:function(e,t,r){Promise.resolve().then(r.bind(r,4919))},4919:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return c}});var a=r(3827),n=r(4090),s=r(2406),l=r(7907),i=r(8792),o=r(1399);function c(e){var t,r,c,u;let{params:d}=e,{user:m,loading:h}=(0,s.useAuth)(),x=(0,l.useRouter)(),[f,y]=(0,n.useState)(null),[g,p]=(0,n.useState)(!0),[v,b]=(0,n.useState)("");return((0,n.useEffect)(()=>{h||m||x.push("/auth/login")},[m,h,x]),(0,n.useEffect)(()=>{let e=async()=>{if(d.id)try{p(!0);let e=await fetch("/api/ilanlar/".concat(d.id));if(!e.ok){let t=await e.json();throw Error(t.error||"İlan detayları getirilirken bir hata oluştu")}let t=await e.json();y(t),b("")}catch(e){console.error("İlan detayları y\xfcklenirken hata oluştu:",e),b("İlan detayları y\xfcklenirken bir hata oluştu. L\xfctfen daha sonra tekrar deneyin.")}finally{p(!1)}};d.id&&e()},[d.id]),h||!m)?(0,a.jsx)("div",{className:"min-h-screen bg-white pt-20",children:(0,a.jsx)("div",{className:"container mx-auto px-4",children:(0,a.jsx)("div",{className:"flex justify-center items-center py-12",children:(0,a.jsx)("div",{className:"w-12 h-12 border-4 border-[#FFB996] border-t-[#FF8B5E] rounded-full animate-spin"})})})}):(0,a.jsx)("div",{className:"min-h-screen bg-white pt-24 pb-16",children:(0,a.jsx)("div",{className:"container mx-auto px-4",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsxs)("button",{onClick:()=>x.back(),className:"flex items-center text-[#6B3416] hover:text-[#994D1C] transition-colors",children:[(0,a.jsx)(o.x_l,{className:"mr-2"}),"Geri D\xf6n"]})}),g?(0,a.jsx)("div",{className:"flex justify-center items-center py-12",children:(0,a.jsx)("div",{className:"w-12 h-12 border-4 border-[#FFB996] border-t-[#FF8B5E] rounded-full animate-spin"})}):v?(0,a.jsx)("div",{className:"bg-white p-6 rounded-xl shadow-md",children:(0,a.jsx)("p",{className:"text-red-500 text-center",children:v})}):f?(0,a.jsxs)("div",{className:"bg-white p-8 rounded-xl shadow-lg",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-[#6B3416] mb-4",children:f.title}),(0,a.jsxs)("div",{className:"flex items-center mb-6 p-4 bg-gray-50 rounded-lg",children:[(0,a.jsx)("div",{className:"w-16 h-16 rounded-full bg-gradient-to-r from-[#FFB996] to-[#FF8B5E] flex items-center justify-center text-white text-xl font-bold mr-4",children:null===(t=f.teacher)||void 0===t?void 0:t.name.charAt(0).toUpperCase()}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-[#6B3416]",children:null===(r=f.teacher)||void 0===r?void 0:r.name}),(0,a.jsx)("p",{className:"text-[#994D1C]",children:(null===(c=f.teacher)||void 0===c?void 0:c.expertise)||"\xd6ğretmen"}),(0,a.jsxs)("p",{className:"text-gray-600 flex items-center mt-1",children:[(0,a.jsx)(o.Q7H,{className:"mr-1 text-sm"}),null===(u=f.teacher)||void 0===u?void 0:u.university]})]})]}),(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold text-[#6B3416] mb-4",children:"Ders Detayları"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center p-3 bg-gray-50 rounded-lg",children:[(0,a.jsx)(o.l80,{className:"text-green-600 text-xl mr-3"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Saatlik \xdccret"}),(0,a.jsxs)("p",{className:"font-semibold text-gray-800",children:[f.price," ₺"]})]})]}),(0,a.jsxs)("div",{className:"flex items-center p-3 bg-gray-50 rounded-lg",children:[(0,a.jsx)(o.qyc,{className:"text-blue-600 text-xl mr-3"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Ders S\xfcresi"}),(0,a.jsxs)("p",{className:"font-semibold text-gray-800",children:[f.duration," Saat"]})]})]}),(0,a.jsxs)("div",{className:"flex items-center p-3 bg-gray-50 rounded-lg",children:[(0,a.jsx)(o.FcZ,{className:"text-purple-600 text-xl mr-3"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Ders Y\xf6ntemi"}),(0,a.jsx)("p",{className:"font-semibold text-gray-800 capitalize",children:f.method})]})]}),(0,a.jsxs)("div",{className:"flex items-center p-3 bg-gray-50 rounded-lg",children:[(0,a.jsx)(o.IiJ,{className:"text-orange-600 text-xl mr-3"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Ders Sıklığı"}),(0,a.jsx)("p",{className:"font-semibold text-gray-800",children:(e=>{switch(e){case"daily":return"G\xfcnl\xfck";case"weekly":return"Haftalık";case"monthly":return"Aylık";case"flexible":return"Esnek";default:return e}})(f.frequency)})]})]})]})]}),(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold text-[#6B3416] mb-4",children:"Ders A\xe7ıklaması"}),(0,a.jsx)("div",{className:"p-4 bg-gray-50 rounded-lg",children:(0,a.jsx)("p",{className:"text-gray-800 whitespace-pre-line",children:f.description})})]}),(0,a.jsxs)("div",{className:"text-sm text-gray-500 mb-8",children:["İlan Tarihi: ",new Date(f.createdAt).toLocaleDateString("tr-TR",{year:"numeric",month:"long",day:"numeric"})]}),(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsxs)(i.default,{href:"/mesajlar?recipient=".concat(f.userId),className:"px-6 py-3 bg-gradient-to-r from-[#FFB996] to-[#FF8B5E] text-white rounded-xl font-medium hover:shadow-md transition-all duration-300 flex items-center",children:[(0,a.jsx)(o.Xws,{className:"mr-2"}),"\xd6ğretmen ile İletişime Ge\xe7"]})})]}):(0,a.jsxs)("div",{className:"bg-white p-8 rounded-xl shadow-md text-center",children:[(0,a.jsx)("p",{className:"text-[#994D1C] mb-4",children:"İlan bulunamadı."}),(0,a.jsx)(i.default,{href:"/ilanlar",className:"px-4 py-2 bg-gradient-to-r from-[#FFB996] to-[#FF8B5E] text-white rounded-lg text-sm font-medium hover:shadow-md transition-all duration-300",children:"T\xfcm İlanlara D\xf6n"})]})]})})})}},2406:function(e,t,r){"use strict";r.r(t),r.d(t,{AuthProvider:function(){return i},useAuth:function(){return o}});var a=r(3827),n=r(4090),s=r(7907);let l=(0,n.createContext)({user:null,loading:!1,error:null,login:async()=>{},register:async()=>{},logout:async()=>{},setUser:()=>{}});function i(e){let{children:t}=e,[r,i]=(0,n.useState)(null),[o,c]=(0,n.useState)(!0),[u,d]=(0,n.useState)(null),[m,h]=(0,n.useState)(!1),x=(0,s.useRouter)();(0,n.useEffect)(()=>{h(!0);try{let e=localStorage.getItem("user");if(e){let t=JSON.parse(e);i(t)}}catch(e){console.error("Error loading user from localStorage:",e)}finally{c(!1)}},[]);let f=async e=>{c(!0),d(null);try{let t=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),r=await t.json();if(403===t.status&&r.needsVerification){d("L\xfctfen \xf6nce email adresinizi doğrulayın"),x.push("/auth/verify?email=".concat(encodeURIComponent(r.email)));return}if(!t.ok)throw Error(r.error||"Giriş yapılırken bir hata oluştu");i(r.user),localStorage.setItem("user",JSON.stringify(r.user)),localStorage.setItem("token",r.token),"student"===r.user.role?x.push("/egitmenler"):x.push("/")}catch(e){throw d(e.message),e}finally{c(!1)}},y=async e=>{c(!0),d(null);try{let t=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),r=await t.json();if(!t.ok)throw Error(r.error||"Kayıt olurken bir hata oluştu");let a=null;r.user?(a=r.user,console.log("API yanıtı result.user i\xe7inde bulundu:",a)):r.id||r._id||r.name||r.email?(a=r,console.log("API yanıtı doğrudan result i\xe7inde bulundu:",a)):(console.log("API yanıtında kullanıcı verisi bulunamadı, ge\xe7ici kullanıcı oluşturuluyor"),a={id:Math.random().toString(36).substring(2,15),name:e.name,email:e.email,role:e.role,university:e.university,isVerified:!1}),console.log("Kullanıcının kayıt formunda se\xe7tiği rol:",e.role),console.log("API yanıtında gelen rol (varsa):",a.role);let n={id:a.id||a._id||"",name:a.name||e.name||"",email:a.email||e.email||"",role:e.role||a.role||"student",university:a.university||e.university||"",isVerified:a.isVerified||!1,expertise:a.expertise};console.log("Doğrulanmış kullanıcı verisi:",n),x.push("/auth/verify?email=".concat(encodeURIComponent(n.email)))}catch(e){throw console.error("Kayıt hatası:",e),d(e.message),e}finally{c(!1)}},g=async()=>{c(!0),d(null);try{let e=await fetch("/api/auth/logout",{method:"POST"});if(!e.ok){let t=await e.json();throw Error(t.error||"\xc7ıkış yapılırken bir hata oluştu")}i(null),localStorage.removeItem("user"),localStorage.removeItem("token"),x.push("/auth/login")}catch(e){throw d(e.message),e}finally{c(!1)}};return m?(0,a.jsx)(l.Provider,{value:{user:r,loading:o,error:u,login:f,register:y,logout:g,setUser:i},children:t}):(0,a.jsx)(l.Provider,{value:{user:null,loading:!0,error:null,login:async()=>{},register:async()=>{},logout:async()=>{},setUser:()=>{}},children:t})}function o(){return(0,n.useContext)(l)}},7907:function(e,t,r){"use strict";var a=r(5313);r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}}),r.o(a,"useSearchParams")&&r.d(t,{useSearchParams:function(){return a.useSearchParams}})},158:function(e,t,r){"use strict";r.d(t,{w_:function(){return u}});var a=r(4090),n={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},s=a.createContext&&a.createContext(n),l=["attr","size","title"];function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach(function(t){var a,n;a=t,n=r[t],(a=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(a))in e?Object.defineProperty(e,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[a]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function u(e){return t=>a.createElement(d,i({attr:c({},e.attr)},t),function e(t){return t&&t.map((t,r)=>a.createElement(t.tag,c({key:r},t.attr),e(t.child)))}(e.child))}function d(e){var t=t=>{var r,{attr:n,size:s,title:o}=e,u=function(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}(e,l),d=s||t.size||"1em";return t.className&&(r=t.className),e.className&&(r=(r?r+" ":"")+e.className),a.createElement("svg",i({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,n,u,{className:r,style:c(c({color:e.color||t.color},t.style),e.style),height:d,width:d,xmlns:"http://www.w3.org/2000/svg"}),o&&a.createElement("title",null,o),e.children)};return void 0!==s?a.createElement(s.Consumer,null,e=>t(e)):t(n)}}},function(e){e.O(0,[699,792,971,69,744],function(){return e(e.s=445)}),_N_E=e.O()}]);