(()=>{var e={};e.id=798,e.ids=[798],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},33985:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>i.a,__next_app__:()=>u,originalPathname:()=>x,pages:()=>c,routeModule:()=>m,tree:()=>d});var r=a(50482),s=a(69108),n=a(62563),i=a.n(n),l=a(68300),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);a.d(t,o);let d=["",{children:["ilanlarim",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,81920)),"C:\\Users\\eren\\Kavun, organization\\app\\ilanlarim\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,6521)),"C:\\Users\\eren\\Kavun, organization\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,69361,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\eren\\Kavun, organization\\app\\ilanlarim\\page.tsx"],x="/ilanlarim/page",u={require:a,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/ilanlarim/page",pathname:"/ilanlarim",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},11193:(e,t,a)=>{Promise.resolve().then(a.bind(a,75983))},75983:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o});var r=a(95344),s=a(3729),n=a(67296),i=a(8428),l=a(15739);function o(){let{user:e,loading:t}=(0,n.useAuth)(),a=(0,i.useRouter)(),[o,d]=(0,s.useState)([]),[c,x]=(0,s.useState)(!0),[u,m]=(0,s.useState)("");(0,s.useEffect)(()=>{t||e?!t&&e&&"teacher"!==e.role&&a.push("/"):a.push("/auth/login")},[e,t,a]),(0,s.useEffect)(()=>{let t=async()=>{if(e)try{x(!0);let t=new URLSearchParams(window.location.search).get("refresh");if("true"===t){let e=window.location.pathname;window.history.replaceState({},"",e)}let a=localStorage.getItem("token"),r=await fetch(`/api/ilanlar?userId=${e.id}`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`}});if(!r.ok){let e=await r.json();throw Error(e.error||"İlanlar getirilirken bir hata oluştu")}let s=await r.json();d(s),m("")}catch(e){console.error("İlanlar y\xfcklenirken hata oluştu:",e),m("İlanlar y\xfcklenirken bir hata oluştu. L\xfctfen daha sonra tekrar deneyin.")}finally{x(!1)}};e&&"teacher"===e.role&&t()},[e,a]);let h=async e=>{if(confirm("Bu ilanı silmek istediğinizden emin misiniz?"))try{let t=localStorage.getItem("token");if(!(await fetch(`/api/ilanlar/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`}})).ok)throw Error("İlan silinirken bir hata oluştu");d(t=>t.filter(t=>t._id!==e))}catch(e){console.error("İlan silme hatası:",e),alert("İlan silinirken bir hata oluştu")}};return t||!e?r.jsx("div",{className:"min-h-screen bg-white pt-20",children:r.jsx("div",{className:"container mx-auto px-4",children:r.jsx("div",{className:"flex justify-center items-center py-12",children:r.jsx("div",{className:"w-12 h-12 border-4 border-[#FFB996] border-t-[#FF8B5E] rounded-full animate-spin"})})})}):e&&"teacher"!==e.role?null:r.jsx("div",{className:"min-h-screen bg-white pt-24 pb-16",children:r.jsx("div",{className:"container mx-auto px-4",children:(0,r.jsxs)("div",{className:"max-w-5xl mx-auto",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-[#6B3416]",children:"İlanlarım"}),(0,r.jsxs)("button",{onClick:()=>a.push("/ilan-ver"),className:"px-4 py-2 bg-gradient-to-r from-[#FFB996] to-[#FF8B5E] text-white rounded-lg flex items-center gap-2 hover:shadow-lg transition-all duration-300",children:[r.jsx(l.wEH,{}),r.jsx("span",{children:"Yeni İlan Ekle"})]})]}),c?r.jsx("div",{className:"flex justify-center items-center py-12",children:r.jsx("div",{className:"w-12 h-12 border-4 border-[#FFB996] border-t-[#FF8B5E] rounded-full animate-spin"})}):u?r.jsx("div",{className:"bg-white p-6 rounded-xl shadow-md",children:r.jsx("p",{className:"text-red-500 text-center",children:u})}):0===o.length?(0,r.jsxs)("div",{className:"bg-white p-8 rounded-xl shadow-md text-center",children:[r.jsx("p",{className:"text-[#994D1C] mb-4",children:"Hen\xfcz hi\xe7 ilan oluşturmadınız."}),(0,r.jsxs)("button",{onClick:()=>a.push("/ilan-ver"),className:"px-4 py-2 bg-gradient-to-r from-[#FFB996] to-[#FF8B5E] text-white rounded-lg inline-flex items-center gap-2 hover:shadow-lg transition-all duration-300",children:[r.jsx(l.wEH,{}),r.jsx("span",{children:"İlk İlanınızı Ekleyin"})]})]}):r.jsx("div",{className:"space-y-6",children:o.map(e=>(0,r.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-md hover:shadow-lg transition-all duration-300",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start",children:[(0,r.jsxs)("div",{children:[r.jsx("h2",{className:"text-xl font-bold text-[#6B3416] mb-2",children:e.title}),r.jsx("p",{className:"text-[#994D1C] mb-4",children:e.description}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"\xdccret"}),(0,r.jsxs)("p",{className:"font-medium text-[#6B3416]",children:[e.price," ₺/Saat"]})]}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"S\xfcre"}),(0,r.jsxs)("p",{className:"font-medium text-[#6B3416]",children:[e.duration," Saat"]})]}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Y\xf6ntem"}),r.jsx("p",{className:"font-medium text-[#6B3416] capitalize",children:e.method})]}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Sıklık"}),r.jsx("p",{className:"font-medium text-[#6B3416] capitalize",children:e.frequency})]})]}),(0,r.jsxs)("div",{className:"text-sm text-gray-500",children:[(0,r.jsxs)("span",{children:["Oluşturulma: ",new Date(e.createdAt).toLocaleDateString("tr-TR")]}),r.jsx("span",{className:"mx-2",children:"•"}),(0,r.jsxs)("span",{children:["G\xfcncelleme: ",new Date(e.updatedAt).toLocaleDateString("tr-TR")]})]})]}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[r.jsx("button",{onClick:()=>a.push(`/ilan-duzenle/${e._id}`),className:"p-2 text-blue-500 hover:bg-blue-50 rounded-full transition-colors duration-300",children:r.jsx(l.fmQ,{})}),r.jsx("button",{onClick:()=>h(e._id),className:"p-2 text-red-500 hover:bg-red-50 rounded-full transition-colors duration-300",children:r.jsx(l.Xm5,{})})]})]}),(0,r.jsxs)("div",{className:"mt-4 flex justify-between items-center",children:[r.jsx("div",{className:`px-3 py-1 rounded-full text-sm font-medium ${"active"===e.status?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:"active"===e.status?"Aktif":"Pasif"}),r.jsx("button",{className:"px-4 py-1.5 bg-[#FFE5D9] text-[#994D1C] rounded-lg text-sm hover:bg-[#FFB996] hover:text-white transition-colors duration-300",children:"Başvuruları G\xf6r\xfcnt\xfcle"})]})]},e._id))})]})})})}},81920:(e,t,a)=>{"use strict";a.r(t),a.d(t,{$$typeof:()=>n,__esModule:()=>s,default:()=>i});let r=(0,a(86843).createProxy)(String.raw`C:\Users\eren\Kavun, organization\app\ilanlarim\page.tsx`),{__esModule:s,$$typeof:n}=r,i=r.default}};var t=require("../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[1638,2165,5739,8798],()=>a(33985));module.exports=r})();