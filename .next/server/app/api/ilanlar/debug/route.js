"use strict";(()=>{var e={};e.id=4527,e.ids=[4527],e.modules={11185:e=>{e.exports=require("mongoose")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},24476:(e,t,r)=>{r.r(t),r.d(t,{headerHooks:()=>S,originalPathname:()=>x,patchFetch:()=>k,requestAsyncStorage:()=>v,routeModule:()=>y,serverHooks:()=>b,staticGenerationAsyncStorage:()=>f,staticGenerationBailout:()=>w});var n={};r.r(n),r.d(n,{GET:()=>h});var i=r(95419),a=r(69108),o=r(99678),u=r(78070),l=r(22345),s=r(11185),d=r.n(s);let g=new(d()).Schema({name:String,email:String,role:String,university:String,expertise:String}),c=d().models.User||d().model("User",g),m=new(d()).Schema({title:{type:String,required:[!0,"Başlık zorunludur"],trim:!0},description:{type:String,required:[!0,"A\xe7ıklama zorunludur"],trim:!0},price:{type:Number,required:[!0,"\xdccret zorunludur"]},method:{type:String,enum:["online","y\xfczy\xfcze","hibrit"],default:"online"},duration:{type:Number,required:[!0,"S\xfcre zorunludur"]},frequency:{type:String,enum:["daily","weekly","monthly","flexible"],default:"weekly"},status:{type:String,enum:["active","inactive"],default:"active"},userId:{type:String,required:!0}},{timestamps:!0}),p=d().models.Ilan||d().model("Ilan",m);async function h(e){try{await (0,l.Z)();let{searchParams:t}=new URL(e.url),r=t.get("university"),n=await c.distinct("university"),i=await c.find({role:"teacher"}).select("name email university"),a=await p.find({status:"active"}),o=[],s=[];if(r){let e=(o=await c.find({university:{$regex:RegExp("^"+r+"$","i")},role:"teacher"})).map(e=>e._id.toString());s=await p.find({userId:{$in:e},status:"active"})}return u.Z.json({allUniversities:n,totalUniversities:n.length,totalTeachers:i.length,totalListings:a.length,universityInfo:r?{searchedUniversity:r,teachersFound:o.length,listingsFound:s.length,teachers:o,listings:s}:null})}catch(e){return console.error("Debug bilgisi getirme hatası:",e),u.Z.json({error:e.message||"Debug bilgisi getirilirken bir hata oluştu"},{status:500})}}let y=new i.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/ilanlar/debug/route",pathname:"/api/ilanlar/debug",filename:"route",bundlePath:"app/api/ilanlar/debug/route"},resolvedPagePath:"C:\\Users\\eren\\Kavun, organization\\app\\api\\ilanlar\\debug\\route.ts",nextConfigOutput:"",userland:n}),{requestAsyncStorage:v,staticGenerationAsyncStorage:f,serverHooks:b,headerHooks:S,staticGenerationBailout:w}=y,x="/api/ilanlar/debug/route";function k(){return(0,o.patchFetch)({serverHooks:b,staticGenerationAsyncStorage:f})}},22345:(e,t,r)=>{r.d(t,{Z:()=>u});var n=r(11185),i=r.n(n);let a=process.env.MONGODB_URI;if(!a)throw Error("MongoDB URI bulunamadı. L\xfctfen .env dosyasını kontrol edin.");let o=global.mongoose||{conn:null,promise:null};global.mongoose||(global.mongoose=o);let u=async function(){if(o.conn)return o.conn;o.promise||(o.promise=i().connect(a,{bufferCommands:!1}).then(e=>e));try{o.conn=await o.promise}catch(e){throw o.promise=null,e}return o.conn}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[1638,6206],()=>r(24476));module.exports=n})();