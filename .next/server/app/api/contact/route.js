"use strict";(()=>{var e={};e.id=386,e.ids=[386],e.modules={11185:e=>{e.exports=require("mongoose")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},32177:(e,t,r)=>{r.r(t),r.d(t,{headerHooks:()=>S,originalPathname:()=>j,patchFetch:()=>q,requestAsyncStorage:()=>y,routeModule:()=>h,serverHooks:()=>v,staticGenerationAsyncStorage:()=>f,staticGenerationBailout:()=>w});var a={};r.r(a),r.d(a,{POST:()=>g});var n=r(95419),o=r(69108),i=r(99678),s=r(78070),u=r(11185),c=r.n(u);let d=process.env.MONGODB_URI;if(!d)throw Error("MongoDB bağlantı adresi bulunamadı. L\xfctfen .env dosyasını kontrol edin.");let l=async()=>{try{if(1===c().connection.readyState)return;return await c().connect(d,{maxPoolSize:10,serverSelectionTimeoutMS:5e3,socketTimeoutMS:45e3}),c().connection}catch(e){throw e}},p=new(c()).Schema({name:{type:String,required:!0},email:{type:String,required:!0},subject:{type:String,required:!0},message:{type:String,required:!0},createdAt:{type:Date,default:Date.now}}),m=c().models.Contact||c().model("Contact",p);async function g(e){try{let{name:t,email:r,subject:a,message:n}=await e.json();if(!t||!r||!a||!n)return s.Z.json({error:"T\xfcm alanlar zorunludur."},{status:400});if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r))return s.Z.json({error:"Ge\xe7erli bir email adresi giriniz."},{status:400});await l();let o=new m({name:t,email:r,subject:a,message:n});return await o.save(),s.Z.json({message:"Mesajınız başarıyla g\xf6nderildi."},{status:201})}catch(e){return console.error("İletişim formu hatası:",e),s.Z.json({error:"Bir hata oluştu. L\xfctfen daha sonra tekrar deneyin."},{status:500})}}let h=new n.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/contact/route",pathname:"/api/contact",filename:"route",bundlePath:"app/api/contact/route"},resolvedPagePath:"C:\\Users\\eren\\Kavun, organization\\app\\api\\contact\\route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:y,staticGenerationAsyncStorage:f,serverHooks:v,headerHooks:S,staticGenerationBailout:w}=h,j="/api/contact/route";function q(){return(0,i.patchFetch)({serverHooks:v,staticGenerationAsyncStorage:f})}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[1638,6206],()=>r(32177));module.exports=a})();