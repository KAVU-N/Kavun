"use strict";(()=>{var e={};e.id=8788,e.ids=[8788],e.modules={11185:e=>{e.exports=require("mongoose")},72934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},14300:e=>{e.exports=require("buffer")},6113:e=>{e.exports=require("crypto")},12781:e=>{e.exports=require("stream")},73837:e=>{e.exports=require("util")},81426:(e,r,t)=>{t.r(r),t.d(r,{headerHooks:()=>w,originalPathname:()=>v,patchFetch:()=>q,requestAsyncStorage:()=>f,routeModule:()=>A,serverHooks:()=>C,staticGenerationAsyncStorage:()=>y,staticGenerationBailout:()=>x});var n={};t.r(n),t.d(n,{GET:()=>h,OPTIONS:()=>g});var o=t(95419),s=t(69108),i=t(99678),a=t(78070),l=t(7439),u=t(46082),c=t.n(u),d=t(22345),p=t(52055);let m=process.env.JWT_SECRET||"your-secret-key";async function g(){return a.Z.json({},{headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET, POST, PUT, DELETE, OPTIONS","Access-Control-Allow-Headers":"Content-Type, Authorization, Cookie","Access-Control-Allow-Credentials":"true"}})}async function h(){try{let e=(0,l.cookies)().get("token");if(!e)return a.Z.json({user:null},{headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Credentials":"true"}});let r=c().verify(e.value,m);await (0,d.Z)();let t=await p.Z.findById(r.userId).select("-password");if(!t)return a.Z.json({user:null},{headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Credentials":"true"}});return a.Z.json({user:t},{headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Credentials":"true"}})}catch(e){return console.error("Auth check error:",e),a.Z.json({user:null},{headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Credentials":"true"}})}}let A=new o.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/auth/me/route",pathname:"/api/auth/me",filename:"route",bundlePath:"app/api/auth/me/route"},resolvedPagePath:"C:\\Users\\eren\\Kavun, organization\\app\\api\\auth\\me\\route.ts",nextConfigOutput:"",userland:n}),{requestAsyncStorage:f,staticGenerationAsyncStorage:y,serverHooks:C,headerHooks:w,staticGenerationBailout:x}=A,v="/api/auth/me/route";function q(){return(0,i.patchFetch)({serverHooks:C,staticGenerationAsyncStorage:y})}},22345:(e,r,t)=>{t.d(r,{Z:()=>a});var n=t(11185),o=t.n(n);let s=process.env.MONGODB_URI;if(!s)throw Error("MongoDB URI bulunamadı. L\xfctfen .env dosyasını kontrol edin.");let i=global.mongoose||{conn:null,promise:null};global.mongoose||(global.mongoose=i);let a=async function(){if(i.conn)return i.conn;i.promise||(i.promise=o().connect(s,{bufferCommands:!1}).then(e=>e));try{i.conn=await i.promise}catch(e){throw i.promise=null,e}return i.conn}},52055:(e,r,t)=>{t.d(r,{Z:()=>i});var n=t(11185),o=t.n(n);let s=new n.Schema({name:{type:String,required:[!0,"Ad alanı zorunludur"],trim:!0,minlength:[2,"Ad en az 2 karakter olmalıdır"],maxlength:[50,"Ad en fazla 50 karakter olabilir"]},email:{type:String,required:[!0,"Email alanı zorunludur"],unique:!0,trim:!0,lowercase:!0,validate:{validator:function(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)},message:"Ge\xe7erli bir email adresi giriniz"}},password:{type:String,required:[!0,"Şifre alanı zorunludur"],minlength:[8,"Şifre en az 8 karakter olmalıdır"],select:!1},role:{type:String,required:[!0,"Rol alanı zorunludur"],enum:{values:["student","teacher"],message:"Ge\xe7erli bir rol se\xe7iniz"}},university:{type:String,required:[!0,"\xdcniversite alanı zorunludur"],trim:!0},isVerified:{type:Boolean,default:!1},verificationCode:String,verificationCodeExpires:Date,resetPasswordCode:String,resetPasswordExpires:Date,expertise:{type:String,default:"",trim:!0},createdAt:{type:Date,default:Date.now}},{timestamps:!0,strict:!0,strictQuery:!0,collection:"users"});s.index({email:1},{unique:!0});try{o().deleteModel("User")}catch(e){}let i=o().model("User",s)}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),n=r.X(0,[1638,6206,6082,7439],()=>t(81426));module.exports=n})();