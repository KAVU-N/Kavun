"use strict";(()=>{var e={};e.id=2748,e.ids=[2748],e.modules={11185:e=>{e.exports=require("mongoose")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},93565:(e,r,t)=>{t.r(r),t.d(r,{headerHooks:()=>v,originalPathname:()=>h,patchFetch:()=>y,requestAsyncStorage:()=>c,routeModule:()=>m,serverHooks:()=>f,staticGenerationAsyncStorage:()=>p,staticGenerationBailout:()=>g});var a={};t.r(a),t.d(a,{POST:()=>d});var i=t(95419),n=t(69108),o=t(99678),s=t(78070),u=t(52055),l=t(22345);async function d(e){try{await (0,l.Z)();let{email:r,code:t}=await e.json(),a=await u.Z.findOne({email:r,verificationCode:t,verificationCodeExpires:{$gt:new Date}});if(!a)return s.Z.json({error:"Ge\xe7ersiz veya s\xfcresi dolmuş doğrulama kodu"},{status:400});return a.isVerified=!0,a.verificationCode=void 0,a.verificationCodeExpires=void 0,await a.save(),s.Z.json({message:"E-posta adresi başarıyla doğrulandı"})}catch(e){return s.Z.json({error:e.message||"Bir hata oluştu"},{status:500})}}let m=new i.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/auth/verify-email/route",pathname:"/api/auth/verify-email",filename:"route",bundlePath:"app/api/auth/verify-email/route"},resolvedPagePath:"C:\\Users\\eren\\Kavun, organization\\app\\api\\auth\\verify-email\\route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:c,staticGenerationAsyncStorage:p,serverHooks:f,headerHooks:v,staticGenerationBailout:g}=m,h="/api/auth/verify-email/route";function y(){return(0,o.patchFetch)({serverHooks:f,staticGenerationAsyncStorage:p})}},22345:(e,r,t)=>{t.d(r,{Z:()=>s});var a=t(11185),i=t.n(a);let n=process.env.MONGODB_URI;if(!n)throw Error("MongoDB URI bulunamadı. L\xfctfen .env dosyasını kontrol edin.");let o=global.mongoose||{conn:null,promise:null};global.mongoose||(global.mongoose=o);let s=async function(){if(o.conn)return o.conn;o.promise||(o.promise=i().connect(n,{bufferCommands:!1}).then(e=>e));try{o.conn=await o.promise}catch(e){throw o.promise=null,e}return o.conn}},52055:(e,r,t)=>{t.d(r,{Z:()=>o});var a=t(11185),i=t.n(a);let n=new a.Schema({name:{type:String,required:[!0,"Ad alanı zorunludur"],trim:!0,minlength:[2,"Ad en az 2 karakter olmalıdır"],maxlength:[50,"Ad en fazla 50 karakter olabilir"]},email:{type:String,required:[!0,"Email alanı zorunludur"],unique:!0,trim:!0,lowercase:!0,validate:{validator:function(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)},message:"Ge\xe7erli bir email adresi giriniz"}},password:{type:String,required:[!0,"Şifre alanı zorunludur"],minlength:[8,"Şifre en az 8 karakter olmalıdır"],select:!1},role:{type:String,required:[!0,"Rol alanı zorunludur"],enum:{values:["student","teacher"],message:"Ge\xe7erli bir rol se\xe7iniz"}},university:{type:String,required:[!0,"\xdcniversite alanı zorunludur"],trim:!0},isVerified:{type:Boolean,default:!1},verificationCode:String,verificationCodeExpires:Date,resetPasswordCode:String,resetPasswordExpires:Date,expertise:{type:String,default:"",trim:!0},createdAt:{type:Date,default:Date.now}},{timestamps:!0,strict:!0,strictQuery:!0,collection:"users"});n.index({email:1},{unique:!0});try{i().deleteModel("User")}catch(e){}let o=i().model("User",n)}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[1638,6206],()=>t(93565));module.exports=a})();