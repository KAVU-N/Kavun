"use strict";(()=>{var e={};e.id=1380,e.ids=[1380],e.modules={11185:e=>{e.exports=require("mongoose")},72934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},14300:e=>{e.exports=require("buffer")},6113:e=>{e.exports=require("crypto")},12781:e=>{e.exports=require("stream")},73837:e=>{e.exports=require("util")},54691:(e,r,t)=>{t.r(r),t.d(r,{headerHooks:()=>v,originalPathname:()=>q,patchFetch:()=>k,requestAsyncStorage:()=>y,routeModule:()=>f,serverHooks:()=>x,staticGenerationAsyncStorage:()=>h,staticGenerationBailout:()=>b});var n={};t.r(n),t.d(n,{GET:()=>g});var a=t(95419),o=t(69108),i=t(99678),s=t(78070),l=t(22345),u=t(52055),d=t(7439),c=t(46082),p=t.n(c);async function m(e){let r=(0,d.headers)().get("Authorization"),t=r?.replace("Bearer ","");if(!t)return console.error("Token bulunamadı"),null;try{let e=p().verify(t,process.env.JWT_SECRET||"default_secret");return{...e,id:e.userId||e.id||e._id}}catch(e){return console.error("Token doğrulama hatası:",e),null}}async function g(e,{params:r}){try{let t=await m(e);if(!t)return s.Z.json({error:"Oturum a\xe7manız gerekiyor"},{status:401});console.log("GET User Detail - User info from token:",t),console.log("GET User Detail - Requested user ID:",r.id);try{await (0,l.Z)(),console.log("MongoDB bağlantısı başarılı")}catch(e){return console.error("MongoDB bağlantı hatası:",e),s.Z.json({error:"Veritabanı bağlantı hatası"},{status:500})}let n=await u.Z.findById(r.id).select("name email role university profilePicture").lean();if(!n)return s.Z.json({error:"Kullanıcı bulunamadı"},{status:404});return s.Z.json(n)}catch(e){return console.error("Kullanıcı bilgileri getirilemedi:",e),s.Z.json({error:"Kullanıcı bilgileri getirilemedi"},{status:500})}}let f=new a.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/users/[id]/route",pathname:"/api/users/[id]",filename:"route",bundlePath:"app/api/users/[id]/route"},resolvedPagePath:"C:\\Users\\eren\\Kavun, organization\\app\\api\\users\\[id]\\route.ts",nextConfigOutput:"",userland:n}),{requestAsyncStorage:y,staticGenerationAsyncStorage:h,serverHooks:x,headerHooks:v,staticGenerationBailout:b}=f,q="/api/users/[id]/route";function k(){return(0,i.patchFetch)({serverHooks:x,staticGenerationAsyncStorage:h})}},22345:(e,r,t)=>{t.d(r,{Z:()=>s});var n=t(11185),a=t.n(n);let o=process.env.MONGODB_URI;if(!o)throw Error("MongoDB URI bulunamadı. L\xfctfen .env dosyasını kontrol edin.");let i=global.mongoose||{conn:null,promise:null};global.mongoose||(global.mongoose=i);let s=async function(){if(i.conn)return i.conn;i.promise||(i.promise=a().connect(o,{bufferCommands:!1}).then(e=>e));try{i.conn=await i.promise}catch(e){throw i.promise=null,e}return i.conn}},52055:(e,r,t)=>{t.d(r,{Z:()=>i});var n=t(11185),a=t.n(n);let o=new n.Schema({name:{type:String,required:[!0,"Ad alanı zorunludur"],trim:!0,minlength:[2,"Ad en az 2 karakter olmalıdır"],maxlength:[50,"Ad en fazla 50 karakter olabilir"]},email:{type:String,required:[!0,"Email alanı zorunludur"],unique:!0,trim:!0,lowercase:!0,validate:{validator:function(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)},message:"Ge\xe7erli bir email adresi giriniz"}},password:{type:String,required:[!0,"Şifre alanı zorunludur"],minlength:[8,"Şifre en az 8 karakter olmalıdır"],select:!1},role:{type:String,required:[!0,"Rol alanı zorunludur"],enum:{values:["student","teacher"],message:"Ge\xe7erli bir rol se\xe7iniz"}},university:{type:String,required:[!0,"\xdcniversite alanı zorunludur"],trim:!0},isVerified:{type:Boolean,default:!1},verificationCode:String,verificationCodeExpires:Date,resetPasswordCode:String,resetPasswordExpires:Date,expertise:{type:String,default:"",trim:!0},createdAt:{type:Date,default:Date.now}},{timestamps:!0,strict:!0,strictQuery:!0,collection:"users"});o.index({email:1},{unique:!0});try{a().deleteModel("User")}catch(e){}let i=a().model("User",o)}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),n=r.X(0,[1638,6206,6082,7439],()=>t(54691));module.exports=n})();