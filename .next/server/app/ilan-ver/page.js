(()=>{var e={};e.id=8855,e.ids=[8855],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19978:(e,r,n)=>{"use strict";n.r(r),n.d(r,{GlobalError:()=>l.a,__next_app__:()=>m,originalPathname:()=>c,pages:()=>u,routeModule:()=>p,tree:()=>d});var t=n(50482),i=n(69108),a=n(62563),l=n.n(a),s=n(68300),o={};for(let e in s)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>s[e]);n.d(r,o);let d=["",{children:["ilan-ver",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(n.bind(n,84196)),"C:\\Users\\eren\\Kavun, organization\\app\\ilan-ver\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(n.bind(n,6521)),"C:\\Users\\eren\\Kavun, organization\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(n.t.bind(n,69361,23)),"next/dist/client/components/not-found-error"]}],u=["C:\\Users\\eren\\Kavun, organization\\app\\ilan-ver\\page.tsx"],c="/ilan-ver/page",m={require:n,loadChunk:()=>Promise.resolve()},p=new t.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/ilan-ver/page",pathname:"/ilan-ver",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},9277:(e,r,n)=>{Promise.resolve().then(n.bind(n,80452))},80452:(e,r,n)=>{"use strict";n.r(r),n.d(r,{default:()=>o});var t=n(95344),i=n(3729),a=n(67296),l=n(8428),s=n(15739);function o(){let{user:e,loading:r}=(0,a.useAuth)(),n=(0,l.useRouter)(),[o,d]=(0,i.useState)({title:"",description:"",price:"",method:"online",duration:"",frequency:"weekly"}),[u,c]=(0,i.useState)(!1),[m,p]=(0,i.useState)(""),[x,h]=(0,i.useState)("");(0,i.useEffect)(()=>{r||e?!r&&e&&"teacher"!==e.role&&n.push("/"):n.push("/auth/login")},[e,r,n]);let g=e=>{let{name:r,value:n}=e.target;d(e=>({...e,[r]:n}))},f=async r=>{if(r.preventDefault(),!o.title.trim()){p("L\xfctfen bir başlık girin");return}if(!o.description.trim()){p("L\xfctfen bir a\xe7ıklama girin");return}if(!o.price.trim()){p("L\xfctfen \xfccret bilgisi girin");return}if(!o.duration.trim()){p("L\xfctfen s\xfcre bilgisi girin");return}try{if(c(!0),p(""),!e||!e.id){p("Kullanıcı kimliği bulunamadı. L\xfctfen tekrar giriş yapın."),c(!1);return}let r=localStorage.getItem("token");if(!r){p("Oturum bilgisi bulunamadı. L\xfctfen tekrar giriş yapın."),c(!1);return}console.log("Listing creation data:",{...o,userId:e.id});let t=await fetch("/api/ilanlar",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify({...o,userId:e.id})});if(!t.ok){let e=await t.json();throw Error(e.error||"İlan oluşturulurken bir hata oluştu")}await t.json(),h("İlanınız başarıyla oluşturuldu!"),d({title:"",description:"",price:"",method:"online",duration:"",frequency:"weekly"}),setTimeout(()=>{n.push("/ilanlarim?refresh=true")},1500)}catch(e){if(console.error("İlan oluşturulurken hata:",e),p(e.message||"İlan oluşturulurken bir hata oluştu. L\xfctfen daha sonra tekrar deneyin."),e.response)try{let r=await e.response.json();console.error("API error details:",r)}catch(e){console.error("Error parsing API error:",e)}}finally{c(!1)}};return r||!e?t.jsx("div",{className:"min-h-screen bg-[#FFF5F0] pt-20",children:t.jsx("div",{className:"container mx-auto px-4",children:t.jsx("div",{className:"flex justify-center items-center py-12",children:t.jsx("div",{className:"w-12 h-12 border-4 border-[#FFB996] border-t-[#FF8B5E] rounded-full animate-spin"})})})}):e&&"teacher"!==e.role?null:t.jsx("div",{className:"min-h-screen bg-[#FFF5F0] pt-24 pb-16",children:t.jsx("div",{className:"container mx-auto px-4",children:(0,t.jsxs)("div",{className:"max-w-2xl mx-auto",children:[t.jsx("h1",{className:"text-3xl font-bold text-[#6B3416] mb-8",children:"Yeni İlan Oluştur"}),x?t.jsx("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-xl mb-6",children:x}):null,m?t.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-xl mb-6",children:m}):null,t.jsx("form",{onSubmit:f,className:"bg-white p-6 rounded-xl shadow-md",children:(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[t.jsx("label",{htmlFor:"title",className:"block text-[#6B3416] font-medium mb-2",children:"İlan Başlığı"}),t.jsx("input",{type:"text",id:"title",name:"title",value:o.title,onChange:g,placeholder:"\xd6rn: Python Programlama Dersi",className:"w-full px-4 py-2 border border-[#FFE5D9] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FFB996]"})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{htmlFor:"description",className:"block text-[#6B3416] font-medium mb-2",children:"Detaylı A\xe7ıklama"}),t.jsx("textarea",{id:"description",name:"description",value:o.description,onChange:g,placeholder:"Ders i\xe7eriği ve kendiniz hakkında bilgi verin...",className:"w-full px-4 py-2 border border-[#FFE5D9] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FFB996] min-h-[150px]"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{children:[t.jsx("label",{htmlFor:"price",className:"block text-[#6B3416] font-medium mb-2",children:"Ders \xdccreti (₺/Saat)"}),t.jsx("input",{type:"text",id:"price",name:"price",value:o.price,onChange:g,placeholder:"\xd6rn: 150",className:"w-full px-4 py-2 border border-[#FFE5D9] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FFB996]"})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{htmlFor:"method",className:"block text-[#6B3416] font-medium mb-2",children:"Ders Y\xf6ntemi"}),(0,t.jsxs)("select",{id:"method",name:"method",value:o.method,onChange:g,className:"w-full px-4 py-2 border border-[#FFE5D9] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FFB996]",children:[t.jsx("option",{value:"online",children:"Online"}),t.jsx("option",{value:"y\xfczy\xfcze",children:"Y\xfcz Y\xfcze"}),t.jsx("option",{value:"hibrit",children:"Hibrit (Online + Y\xfcz Y\xfcze)"})]})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{htmlFor:"duration",className:"block text-[#6B3416] font-medium mb-2",children:"Ders S\xfcresi (Saat)"}),t.jsx("input",{type:"text",id:"duration",name:"duration",value:o.duration,onChange:g,placeholder:"\xd6rn: 1.5",className:"w-full px-4 py-2 border border-[#FFE5D9] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FFB996]"})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{htmlFor:"frequency",className:"block text-[#6B3416] font-medium mb-2",children:"Ders Sıklığı"}),(0,t.jsxs)("select",{id:"frequency",name:"frequency",value:o.frequency,onChange:g,className:"w-full px-4 py-2 border border-[#FFE5D9] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FFB996]",children:[t.jsx("option",{value:"daily",children:"G\xfcnl\xfck"}),t.jsx("option",{value:"weekly",children:"Haftalık"}),t.jsx("option",{value:"monthly",children:"Aylık"}),t.jsx("option",{value:"flexible",children:"Esnek"})]})]})]}),t.jsx("div",{className:"pt-4",children:t.jsx("button",{type:"submit",disabled:u,className:`w-full px-6 py-3 bg-gradient-to-r from-[#FFB996] to-[#FF8B5E] text-white font-medium rounded-lg flex items-center justify-center space-x-2 
                    transition-all duration-300 hover:shadow-lg hover:shadow-[#FFB996]/20 ${u?"opacity-70 cursor-not-allowed":""}`,children:u?(0,t.jsxs)(t.Fragment,{children:[t.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-[#FF8B5E] rounded-full animate-spin"}),t.jsx("span",{children:"İşleniyor..."})]}):(0,t.jsxs)(t.Fragment,{children:[t.jsx(s.Y2X,{}),t.jsx("span",{children:"İlanı Yayınla"})]})})})]})})]})})})}},84196:(e,r,n)=>{"use strict";n.r(r),n.d(r,{$$typeof:()=>a,__esModule:()=>i,default:()=>l});let t=(0,n(86843).createProxy)(String.raw`C:\Users\eren\Kavun, organization\app\ilan-ver\page.tsx`),{__esModule:i,$$typeof:a}=t,l=t.default}};var r=require("../../webpack-runtime.js");r.C(e);var n=e=>r(r.s=e),t=r.X(0,[1638,2165,5739,8798],()=>n(19978));module.exports=t})();